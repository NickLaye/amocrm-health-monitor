# Core Security (заполните перед запуском)
# Используйте: openssl rand -hex 32
API_SECRET=generate_random_secret_here
ADMIN_USER=admin
ADMIN_PASSWORD=change_me

# amoCRM OAuth Configuration
# Получите эти данные в настройках интеграции amoCRM
AMOCRM_DOMAIN=your-domain.amocrm.ru
AMOCRM_CLIENT_ID=your_client_id
AMOCRM_CLIENT_SECRET=your_client_secret
AMOCRM_REDIRECT_URI=https://your-domain.com/oauth/callback
AMOCRM_ACCESS_TOKEN=your_initial_access_token
AMOCRM_REFRESH_TOKEN=your_initial_refresh_token

# POST API Health Check Configuration (REQUIRED!)
# Create a test deal in amoCRM and a custom text field for health checks
# These are used to verify write access to amoCRM API
AMOCRM_TEST_DEAL_ID=12345678
AMOCRM_TEST_FIELD_ID=1234567

# Multi-tenant (пример для skillssales и cmdf5)
# Укажите через запятую список slug'ов (чаще всего это домен без .amocrm.ru)
AMOCRM_CLIENTS=skillssales,cmdf5

# Для каждого clientId задайте CLIENT_<slug>_* переменные (регистр не важен).
# Значения по умолчанию берутся из глобальных AMOCRM_* если не указаны.
CLIENT_skillssales_DOMAIN=skillssales.amocrm.ru
CLIENT_skillssales_CLIENT_ID=xxx
CLIENT_skillssales_CLIENT_SECRET=xxx
CLIENT_skillssales_REDIRECT_URI=https://skillssales.domain.com/oauth/callback
CLIENT_skillssales_REFRESH_TOKEN=xxx
CLIENT_skillssales_ACCESS_TOKEN=xxx
CLIENT_skillssales_DP_CONTACT_FIELD_ID=123456
CLIENT_skillssales_DP_CONTACT_RESPONSIBLE_ID=98765
CLIENT_skillssales_DP_CHECK_INTERVAL_MS=120000
CLIENT_skillssales_DP_REQUEST_TIMEOUT_MS=15000
CLIENT_skillssales_DP_WEBHOOK_TIMEOUT_MS=60000

CLIENT_cmdf5_DOMAIN=cmdf5.amocrm.ru
# ... остальные CLIENT_cmdf5_* по аналогии

# Mattermost Notifications (обязательны для инцидентов)
MATTERMOST_WEBHOOK_URL=https://your-mattermost.com/hooks/webhook_id
# Упоминания пользователей в уведомлениях (через пробел)
MATTERMOST_MENTIONS=@user1 @user2

# Email Notifications (SMTP)
EMAIL_ENABLED=false
EMAIL_FROM=monitor@yourcompany.com
EMAIL_TO=admin@yourcompany.com,ops@yourcompany.com
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password

# Dashboard URL (optional, used in notifications)
DASHBOARD_URL=http://localhost:3000

# Frontend (Vite) configuration
# URL, который будет зашит в собранный frontend и использован для всех API-запросов
VITE_API_URL=http://localhost:3001/api

# Monitoring Settings
# Интервал проверок в миллисекундах (по умолчанию 60000 = 1 минута)
CHECK_INTERVAL=60000
# Таймаут для определения падения сервиса в миллисекундах (по умолчанию 10000 = 10 секунд)
TIMEOUT_THRESHOLD=10000

# Digital Pipeline Monitoring
# Кастомное поле и ответственный для системного контакта "AmoPulse System Check"
AMOCRM_DP_CONTACT_FIELD_ID=1167681
AMOCRM_DP_CONTACT_RESPONSIBLE_ID=6976090

# Rate limiting (express-rate-limit v8)
# Длительность окна и лимит запросов можно переопределять по окружению
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_LIMIT=100
# По умолчанию IPv6 адреса агрегируются по /56 для защиты от обхода лимитов.
# Укажите false/disable/off, чтобы вернуть поведение до v8 (уникальный IPv6 на клиента).
RATE_LIMIT_IPV6_SUBNET=56

# Server Configuration
PORT=3001
NODE_ENV=development

# Optional: CORS Configuration
# Разрешенные origins через запятую, или * для всех
ALLOWED_ORIGINS=*

# Optional: Deployment Configuration
# Используется только для деплой скрипта
DEPLOY_SERVER=root@your-server-ip
DEPLOY_PASSWORD=your_deploy_password

# Optional: Redis Configuration (для кеширования, если используется)
# REDIS_URL=redis://localhost:6379
# REDIS_ENABLED=false
